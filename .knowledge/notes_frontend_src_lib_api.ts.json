{"is_source_file": true, "format": "TypeScript", "description": "This file defines TypeScript types and classes for interacting with a notes API, supporting both HTTP and localStorage modes, including interfaces and implementations for listing, retrieving, creating, updating, and deleting notes.", "external_files": ["fetch API (built-in)"], "external_methods": ["fetch", "localStorage.getItem", "localStorage.setItem"], "published": ["NoteId", "Note", "NoteInput", "Mode", "INotesApi", "HttpNotesApi", "LocalNotesApi", "createNotesApi", "isHttpMode"], "classes": [{"name": "HttpNotesApi", "description": "Implementation of INotesApi that communicates with a backend server via fetch, supporting RESTful endpoints for notes."}, {"name": "LocalNotesApi", "description": "Implementation of INotesApi that stores notes in localStorage for offline/local mode."}], "methods": [{"name": "export function createNotesApi(): INotesApi { createNotesApi", "description": "Factory function that creates and returns an instance of INotesApi, choosing between HTTP or local mode based on environment variables.", "scope": "", "scopeKind": ""}, {"name": "export function isHttpMode(api: INotesApi): boolean { isHttpMode", "description": "Function that returns true if the given INotesApi instance operates in HTTP mode.", "scope": "", "scopeKind": ""}, {"name": "constructor(baseUrl: string) { constructor", "scope": "HttpNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "async createNote(input: NoteInput): Promise<Note> { createNote", "scope": "LocalNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "createNote(input: NoteInput): Promise<Note>; createNote", "scope": "INotesApi", "scopeKind": "interface", "description": "unavailable"}, {"name": "async deleteNote(id: NoteId): Promise<void> { deleteNote", "scope": "LocalNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "deleteNote(id: NoteId): Promise<void>; deleteNote", "scope": "INotesApi", "scopeKind": "interface", "description": "unavailable"}, {"name": "async getNote(id: NoteId): Promise<Note> { getNote", "scope": "LocalNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "getNote(id: NoteId): Promise<Note>; getNote", "scope": "INotesApi", "scopeKind": "interface", "description": "unavailable"}, {"name": "async listNotes(): Promise<Note[]> { listNotes", "scope": "LocalNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "listNotes(): Promise<Note[]>; listNotes", "scope": "INotesApi", "scopeKind": "interface", "description": "unavailable"}, {"name": "private load(): Note[] { load", "scope": "LocalNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "private newId(): string { newId", "scope": "LocalNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "private async req<T>(path: string, init?: RequestInit): Promise<T> { req", "scope": "HttpNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "private save(notes: Note[]) { save", "scope": "LocalNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "async updateNote(id: NoteId, input: NoteInput): Promise<Note> { updateNote", "scope": "LocalNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "updateNote(id: NoteId, input: NoteInput): Promise<Note>; updateNote", "scope": "INotesApi", "scopeKind": "interface", "description": "unavailable"}], "calls": ["fetch", "localStorage.getItem", "localStorage.setItem"], "search-terms": ["NotesApi", "TypeScript notes interface", "localStorage notes", "fetch-based API"], "state": 2, "file_id": 7, "knowledge_revision": 15, "git_revision": "", "ctags": [{"_type": "tag", "name": "HttpNotesApi", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^class HttpNotesApi implements INotesApi {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "INotesApi", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^interface INotesApi {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "LocalNotesApi", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^class LocalNotesApi implements INotesApi {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "Mode", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^type Mode = 'http' | 'local';$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^export interface Note {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "NoteId", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^export type NoteId = string | number;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "NoteInput", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^export interface NoteInput {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  const base = import.meta.env.PUBLIC_API_BASE_URL as string | undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesApi", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  private base: string;$/", "language": "TypeScript", "kind": "property", "scope": "HttpNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  constructor(baseUrl: string) {$/", "language": "TypeScript", "kind": "method", "scope": "HttpNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^    const updated: Note = { ...notes[idx], title: input.title, content: input.content, updatedAt/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.updateNote", "scopeKind": "method"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  content: string;$/", "language": "TypeScript", "kind": "property", "scope": "Note", "scopeKind": "interface"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  content: string;$/", "language": "TypeScript", "kind": "property", "scope": "NoteInput", "scopeKind": "interface"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  async createNote(input: NoteInput): Promise<Note> {$/", "language": "TypeScript", "kind": "method", "scope": "HttpNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  async createNote(input: NoteInput): Promise<Note> {$/", "language": "TypeScript", "kind": "method", "scope": "LocalNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  createNote(input: NoteInput): Promise<Note>;$/", "language": "TypeScript", "kind": "method", "scope": "INotesApi", "scopeKind": "interface"}, {"_type": "tag", "name": "createNotesApi", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^export function createNotesApi(): INotesApi {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  async deleteNote(id: NoteId): Promise<void> {$/", "language": "TypeScript", "kind": "method", "scope": "HttpNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  async deleteNote(id: NoteId): Promise<void> {$/", "language": "TypeScript", "kind": "method", "scope": "LocalNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  deleteNote(id: NoteId): Promise<void>;$/", "language": "TypeScript", "kind": "method", "scope": "INotesApi", "scopeKind": "interface"}, {"_type": "tag", "name": "getNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  async getNote(id: NoteId): Promise<Note> {$/", "language": "TypeScript", "kind": "method", "scope": "HttpNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "getNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  async getNote(id: NoteId): Promise<Note> {$/", "language": "TypeScript", "kind": "method", "scope": "LocalNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "getNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  getNote(id: NoteId): Promise<Note>;$/", "language": "TypeScript", "kind": "method", "scope": "INotesApi", "scopeKind": "interface"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  id: NoteId;$/", "language": "TypeScript", "kind": "property", "scope": "Note", "scopeKind": "interface"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^    const idx = notes.findIndex(n => String(n.id) === String(id));$/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.updateNote", "scopeKind": "method"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^    const updated: Note = { ...notes[idx], title: input.title, content: input.content, updatedAt/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.updateNote", "scopeKind": "method"}, {"_type": "tag", "name": "isHttpMode", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^export function isHttpMode(api: INotesApi): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  private key = 'notes.local.data';$/", "language": "TypeScript", "kind": "property", "scope": "LocalNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  async listNotes(): Promise<Note[]> {$/", "language": "TypeScript", "kind": "method", "scope": "HttpNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  async listNotes(): Promise<Note[]> {$/", "language": "TypeScript", "kind": "method", "scope": "LocalNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  listNotes(): Promise<Note[]>;$/", "language": "TypeScript", "kind": "method", "scope": "INotesApi", "scopeKind": "interface"}, {"_type": "tag", "name": "load", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  private load(): Note[] {$/", "language": "TypeScript", "kind": "method", "scope": "LocalNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "mode", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  mode: Mode;$/", "language": "TypeScript", "kind": "property", "scope": "INotesApi", "scopeKind": "interface"}, {"_type": "tag", "name": "mode", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  public mode: Mode = 'http';$/", "language": "TypeScript", "kind": "property", "scope": "HttpNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "mode", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  public mode: Mode = 'local';$/", "language": "TypeScript", "kind": "property", "scope": "LocalNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "n", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^    const n = this.load().find(n => String(n.id) === String(id));$/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.getNote", "scopeKind": "method"}, {"_type": "tag", "name": "newId", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  private newId(): string {$/", "language": "TypeScript", "kind": "method", "scope": "LocalNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^    const note: Note = { id: this.newId(), title: input.title || 'Untitled', content: input.cont/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.createNote", "scopeKind": "method"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^    const notes = this.load().filter(n => String(n.id) !== String(id));$/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.deleteNote", "scopeKind": "method"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^    const notes = this.load();$/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.createNote", "scopeKind": "method"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^    const notes = this.load();$/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.updateNote", "scopeKind": "method"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^    const now = new Date().toISOString();$/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.createNote", "scopeKind": "method"}, {"_type": "tag", "name": "parsed", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^      const parsed = JSON.parse(raw);$/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.load", "scopeKind": "method"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^      const raw = localStorage.getItem(this.key);$/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.load", "scopeKind": "method"}, {"_type": "tag", "name": "req", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  private async req<T>(path: string, init?: RequestInit): Promise<T> {$/", "language": "TypeScript", "kind": "method", "scope": "HttpNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^    const res = await fetch(`${this.base}${path}`, {$/", "language": "TypeScript", "kind": "constant", "scope": "HttpNotesApi.req", "scopeKind": "method"}, {"_type": "tag", "name": "save", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  private save(notes: Note[]) {$/", "language": "TypeScript", "kind": "method", "scope": "LocalNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^      const text = await res.text().catch(() => '');$/", "language": "TypeScript", "kind": "constant", "scope": "HttpNotesApi.req", "scopeKind": "method"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^    const updated: Note = { ...notes[idx], title: input.title, content: input.content, updatedAt/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.updateNote", "scopeKind": "method"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  title: string;$/", "language": "TypeScript", "kind": "property", "scope": "Note", "scopeKind": "interface"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  title: string;$/", "language": "TypeScript", "kind": "property", "scope": "NoteInput", "scopeKind": "interface"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  async updateNote(id: NoteId, input: NoteInput): Promise<Note> {$/", "language": "TypeScript", "kind": "method", "scope": "HttpNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  async updateNote(id: NoteId, input: NoteInput): Promise<Note> {$/", "language": "TypeScript", "kind": "method", "scope": "LocalNotesApi", "scopeKind": "class"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  updateNote(id: NoteId, input: NoteInput): Promise<Note>;$/", "language": "TypeScript", "kind": "method", "scope": "INotesApi", "scopeKind": "interface"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^    const updated: Note = { ...notes[idx], title: input.title, content: input.content, updatedAt/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.updateNote", "scopeKind": "method"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^    const updated: Note = { ...notes[idx], title: input.title, content: input.content, updatedAt/", "language": "TypeScript", "kind": "constant", "scope": "LocalNotesApi.updateNote", "scopeKind": "method"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/simple-notes-app-159497-159526/notes_frontend/src/lib/api.ts", "pattern": "/^  updatedAt: string; \\/\\/ ISO timestamp$/", "language": "TypeScript", "kind": "property", "scope": "Note", "scopeKind": "interface"}], "hash": "4cf317352379354e75a54532dfd8c45d", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/lib/api.ts", "fields": [{"name": "interface INotesApi {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface Note {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface NoteInput {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "private base: string;", "scope": "HttpNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "content: string;", "scope": "Note", "scopeKind": "interface", "description": "unavailable"}, {"name": "id: NoteId;", "scope": "Note", "scopeKind": "interface", "description": "unavailable"}, {"name": "private key = 'notes.local.data';", "scope": "LocalNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "mode: Mode;", "scope": "INotesApi", "scopeKind": "interface", "description": "unavailable"}, {"name": "public mode: Mode = 'http';", "scope": "HttpNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "public mode: Mode = 'local';", "scope": "LocalNotesApi", "scopeKind": "class", "description": "unavailable"}, {"name": "title: string;", "scope": "Note", "scopeKind": "interface", "description": "unavailable"}, {"name": "updatedAt: string; \\/\\/ ISO timestamp", "scope": "Note", "scopeKind": "interface", "description": "unavailable"}], "revision_history": [{"15": ""}]}